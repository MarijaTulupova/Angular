<form
  class="todo-create-container"
  [formGroup]="todoForm"
  (ngSubmit)="onSubmit()"
>
  <h2>Edit Todo</h2>

  <label>
    Title:
    <input type="text" formControlName="title" placeholder="Enter title" />
  </label>
  <div
    class="error"
    *ngIf="
      (todoForm.get('title')?.touched || todoForm.get('title')?.dirty) &&
      todoForm.get('title')?.invalid
    "
  >
    <small *ngIf="todoForm.get('title')?.errors?.['required']"
      >Title is required</small
    >
    <small *ngIf="todoForm.get('title')?.errors?.['minlength']"
      >Title must be at least 3 characters</small
    >
    <small *ngIf="todoForm.get('title')?.errors?.['maxlength']"
      >Title cannot exceed 50 characters</small
    >
  </div>

  <label>
    Description:
    <textarea
      cols="10"
      rows="10"
      formControlName="description"
      placeholder="Enter description"
    ></textarea>
  </label>
  <div
    class="error"
    *ngIf="
      (todoForm.get('description')?.touched ||
        todoForm.get('description')?.dirty) &&
      todoForm.get('description')?.invalid
    "
  >
    <small *ngIf="todoForm.get('description')?.errors?.['required']"
      >Description is required</small
    >
    <small *ngIf="todoForm.get('description')?.errors?.['minlength']"
      >Description must be at least 10 characters</small
    >
  </div>

  <label>
    Status:
    <select formControlName="status">
      <option *ngFor="let option of todoStatusOptions" [value]="option">
        {{ option.replace("_", " ") }}
      </option>
    </select>
  </label>
  <div
    class="error"
    *ngIf="
      (todoForm.get('status')?.touched || todoForm.get('status')?.dirty) &&
      todoForm.get('status')?.invalid
    "
  >
    <small *ngIf="todoForm.get('status')?.errors?.['required']"
      >Status is required</small
    >
  </div>

  <div style="display: flex; gap: 10px; margin-top: 15px">
    <button type="submit" [disabled]="todoForm.invalid || isLoading()">
      {{ isLoading() ? "Saving..." : "Save Changes" }}
    </button>
    <button type="button" (click)="navigateToTodos()" [disabled]="isLoading()">
      Cancel
    </button>
  </div>
</form>
